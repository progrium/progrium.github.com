<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
        "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <title>Jeff Lindsay :: Pragmatic idealist. Builder. Thought explorer.</title>

    
    <meta name="author" content="Jeff Lindsay" />

    <script type="text/javascript" src="/scripts/jquery-1.7.2.min.js"></script>

    <link href="http://fonts.googleapis.com/css?family=Open+Sans" rel="stylesheet" type="text/css" />
    <link href="http://fonts.googleapis.com/css?family=VT323" rel="stylesheet" type="text/css" />


    <link rel="stylesheet" type="text/css" href="/style/bootstrap.min.css" />
    <link rel="stylesheet" type="text/css" href="/style/pager.min.css" />
    <link rel="stylesheet" type="text/css" href="/style/alerts.min.css" />
    <link rel="stylesheet/less" type="text/css" href="/style/progrium.less" />

    <link rel="shortcut icon" type="image/x-icon" href="/images/JeffLindsayDeluxe.png" />

    <script type="text/javascript" src="/scripts/less-1.3.0.min.js"></script>

    <link rel="me" href="http://www.google.com/profiles/progrium" />
    <link rel="alternate" type="application/atom+xml" href="/blog/atom.xml" title="Jeff's Blog" />
  </head>
  <body>
    <div id="header">
      <div class="container">
        <div id="tree"></div>
        <h2><a href="/" title="Pragmatic idealist. Builder. Thought explorer."><span>Jeff Li</span>nds<span>ay</span></a></h2>
        <ul>
          <li><a href="/blog">Blog</a></li>
          <li><a href="http://github.com/progrium">Projects</a></li>
          <!--li>Blueprints</li-->
          <li><a href="/about.html">About</a></li>
          <li id="hire"><a href="mailto:progrium+hire@gmail.com">Hire Me</a></li>
        </ul>
      </div>
    </div>
    <div id="content">
      <div class="container">
        <div class="sidebar">
  <div class="portrait">
    <img src="/images/JeffLindsayDeluxe.png" width="150" height="150" />
  </div>
  <div class="button"><a onclick="(function(){var z=document.createElement('script');z.src='https://www.subtome.com/load.js';document.body.appendChild(z);})()" href="#">Subscribe to Blog</a></div>
</div>





<div class="article">
  <div class="date">
    <span class="month">Nov</span>
    <span class="day">13</span><br />
    <span class="year">2013</span>
  </div>
  <h1><a href="/blog/2013/11/13/viewdocs-hosted-markdown-project-documentation">Viewdocs: Hosted Markdown project documentation (finally!)</a></h1>
  <p>A huge part of the user experience for open source software is the documentation. When writing new software to be adopted, I&#8217;ve learned it&#8217;s more important to first write decent docs than tests. And when I forget, <a href='https://github.com/kennethreitz'>Kenneth Reitz</a> is there to remind me.</p>

<p>When I&#8217;ve outgrown a README on Github, I only consider two options for providing documentation: <a href='http://pages.github.com/'>Github Pages</a> and <a href='https://readthedocs.org/'>Read the Docs</a>. Unfortunately, I have problems with both of them. Chiefly, Read the Docs makes me use reStructured Text, and Github Pages means maintaining a separate orphan branch and using a static page generator.</p>

<p>What I&#8217;ve really wanted is something like <a href='http://gist.io/'>Gist.io</a>, but for my repository. Nobody has stepped up, so I built it.</p>

<p>I call it <a href='http://progrium.viewdocs.io/viewdocs'>Viewdocs</a>. It renders static pages on-demand from Markdown in your project&#8217;s docs directory. There&#8217;s no setup, just follow the conventions and it works. It may even already be working for you, since Markdown in a docs directory is not that uncommon. And keeping your documentation in the same branch as your code means it&#8217;s easier for people to contribute docs with their pull requests.</p>

<p>The default layout is borrowed from Gist.io, giving you a clean, elegant documentation site. All you have to do is write some Markdown. That&#8217;s about all there is to it.</p>

<p>You can read more on the <a href='http://progrium.viewdocs.io/viewdocs'>homepage for Viewdocs</a>, which is powered by Viewdocs. Or here&#8217;s a quick video introduction:</p>
<iframe allowFullScreen='allowFullScreen' frameborder='0' height='394' mozallowfullscreen='mozallowfullscreen' src='http://player.vimeo.com/video/79066808' webkitAllowFullScreen='webkitAllowFullScreen' width='700'>No iFrames?</iframe>
</div>

<a href="/blog/2013/11/13/viewdocs-hosted-markdown-project-documentation#disqus_thread">Comments</a>
<hr />





<div class="article">
  <div class="date">
    <span class="month">Aug</span>
    <span class="day">18</span><br />
    <span class="year">2013</span>
  </div>
  <h1><a href="/blog/2013/08/18/hacker-dojo-community-trading-zone">Hacker Dojo: Community Trading Zone</a></h1>
  <p>I recently came out of a Hacker Dojo board meeting, as I do every month, but this time with a renewed sense of excitement for Hacker Dojo. We began with the usual board meeting stuff &#8212; finances, staff benefits, etc &#8212; but there was one final item to discuss that&#8217;s more in tune with the reason I&#8217;m even on the board. There has been an increasingly pressing issue around what Hacker Dojo is. We used to know what it was and had a reasonable idea of what we always wanted it to be, but we&#8217;ve grown, we&#8217;ve learned, and our model has to adapt. This discussion led to a rethinking of the conceptual structure of Hacker Dojo.</p>

<p>One of the reasons this came up is growth. We&#8217;ve had consistent membership growth with only a couple expected downturns, due to various setbacks. For example, when we were temporarily limited to a maximum occupancy of 49 people, membership dropped because people couldn&#8217;t throw the same events as before. Despite setbacks, we&#8217;ve had impressive long-term growth. If you describe us as a &#8220;hackerspace,&#8221; we are the largest in the United Sates, and I believe one of the largest in the world. It&#8217;s clear that overall we&#8217;re doing quite well, but we want to take it further. We want to keep pushing because Hacker Dojo means a lot to all of us and we want to see it, and the culture and ideals that go with it, reach new people and new places.</p>

<p>We&#8217;ve always talked about franchising and starting new locations, but we&#8217;ve learned that a single, 24/7 location with 400 members and around 2,000 people coming through every month is quite difficult to run, especially as a bootstrapped non-profit with minimal staff. We&#8217;ve had sponsorships, but we work hard for those sponsorships and provide services to receive them. Most of our income comes from membership fees. Despite all this we&#8217;re trying our best to continue to take Hacker Dojo to the next level, and it should be noted we have been quite successful so far, for many reasons that could go into another long blog post.</p>

<p>Scaling any organization is hard. Scaling an organization like this one can be extra difficult, especially when we&#8217;re trying to maintain the grassroots, bottom-up, culture that started it. We&#8217;ve always tried to support the concept of a democratic organization. For the first few years we were 100% volunteer run, with no paid employees. The growth of Hacker Dojo has generated lot of extra work to get done that nobody really wants to do. Raising money, working with the city, organizing contractors, dealing with financial issues, having to move to a new location and rent the previous one &#8230; all this requires a LOT of leg work and consistent attention that just wasn&#8217;t happening with volunteers.</p>

<p>Eventually, you need to start hiring full or part-time people. We now have a small staff of paid employees who tackle these more time-intensive tasks. While this has helped us manage the growth, it has created a kind of interesting tension between the forces of the democratic, bottom-up nature of our organization and the forces of more traditional, more centralized modes of operation necessary for efficient execution of a vision. The vision being in the short-term to improve the quality of the experience at Hacker Dojo, and in the long-term to bring Hacker Dojo and all that it stands for &#8212; what some have called the epitome of true Silicon Valley culture &#8212; to more people.</p>

<p>This tension has been healthy and has helped Hacker Dojo often reap the benefits of both worlds. However, as we grow, so does the tension and discussion around it. This was the catalyst for our discussion at the board meeting. Now the realization I&#8217;m excited about is somewhat of an aside from this issue of tension, but the issue was the catalyst for revisiting what Hacker Dojo is. I quite enjoy the occasional existential crisis as it often results in refreshed sense of purpose and meaning.</p>

<p>We revisited many ideas, for example that Hacker Dojo is a platform, and like many platforms it can be hard to describe. We serve purposes in the worlds of education, business, social, and many others. We&#8217;d talked about how Hacker Dojo has played a part in not just projects and startups, but relationships &#8212; partnerships, friendships, and even marriages. We considered different organizations for analogy: universities, incubators, fraternities, and anything else that comes close to an existing framework for all the amazingness that Hacker Dojo produces.</p>

<p>Then it hit us. Communities. Plural.</p>

<p>What we realized is that we&#8217;ve effectively been treating Hacker Dojo as one community. We&#8217;ve sort of acknowledged that there are sub-groups within Hacker Dojo, but we&#8217;ve more or less operated under the assumption that we serve two types of citizens: members and the general public. As we&#8217;ve gotten larger, it&#8217;s become much more difficult to effectively treat either of those as one group. The reality is that they are all actually part of many communities.</p>

<p>The idea was right under our nose the whole time, just under a different guise. Events have always been a core part of Hacker Dojo because Hacker Dojo started with the idea that it could be a place where people could meet and host events like the event that inspired Hacker Dojo itself, SuperHappyDevHouse. When an event happens on a regular basis it turns into a community. A group of people with a common interest and/or set of values come together, turn into a community, and these communities grow, develop, and spawn really interesting things, just as SuperHappyDevHouse spawned Hacker Dojo.</p>

<p>Hacker Dojo now serves many communities both inside and outside of Hacker Dojo; not only internal communities but external ones as well. External communities can also leverage the infrastructure that Hacker Dojo provides. These communities might already have a member of Hacker Dojo, or someone in the community chooses to become a member of Hacker Dojo, usually to throw an event. Once that community gets into Hacker Dojo, they not only see Hacker Dojo, but all the other communities that come together under our roof. Sometimes this inspires even more people to sign up as members, not just to be a part of Hacker Dojo, but to participate in and see what other communities Hacker Dojo offers.</p>

<p>We&#8217;re now thinking of Hacker Dojo not just as a community hub, but as a hub of communities. A community <a href='http://en.wikipedia.org/wiki/Trading_zones'>trading zone</a>, if you will. While we will always support and listen to individual members, we should begin to think of communities, in the plural, as first-class citizens of Hacker Dojo. This may seem like a subtle change but it is a big difference. It means acknowledging and supporting the communities that operate in and around Hacker Dojo. It means going to those communities and asking how we can better serve <em>them as a community</em>, not just individual members.</p>

<p>By connecting with communities we can provide infrastructure to foster their growth and development. Imagine going to the Hacker Dojo website and seeing a page devoted to the many communities of Hacker Dojo. When a new member signs up they could indicate their interests and we could provide them with a list of communities they might be interested in. Hacker Dojo would in a sense then be improving the communities&#8217; &#8220;deal flow.&#8221;</p>

<p>Rethinking Hacker Dojo as infrastructure for communities has led to lots of exciting new ideas. By focusing on empowering them with infrastructure that allows them to flourish, we are then supporting our members in a more meaningful way.</p>

<p>I&#8217;m hoping this simple change in the way the board and members invested in Hacker Dojo think about Hacker Dojo will hopefully lead to lots of positive change. We don&#8217;t have these conversations very often on the board but we need to have them to maintain the vision of Hacker Dojo and we need to have them in public. Clearly this is a collaborative effort, so we want to know how the general community feels about this idea. So I&#8217;m putting this out there, and hopefully it will lead to more exciting discussions.</p>
</div>

<a href="/blog/2013/08/18/hacker-dojo-community-trading-zone#disqus_thread">Comments</a>
<hr />





<div class="article">
  <div class="date">
    <span class="month">Jun</span>
    <span class="day">19</span><br />
    <span class="year">2013</span>
  </div>
  <h1><a href="/blog/2013/06/19/dokku-the-smallest-paas-implementation-youve-ever-seen">Dokku: The smallest PaaS implementation you've ever seen</a></h1>
  <p><a href='https://github.com/progrium/dokku'>Dokku</a> is a mini-Heroku powered by Docker written in less than 100 lines of Bash. Once it&#8217;s set up on a host, you can push Heroku-compatible applications to it via Git. They&#8217;ll build using Heroku buildpacks and then run in isolated containers. The end result is your own, single-host version of Heroku.</p>

<p>Dokku is under 100 lines because it&#8217;s built out of several components that do most of the heavy lifting: Docker, Buildstep, and gitreceive.</p>

<ul>
<li><a href='http://www.docker.io/'>Docker</a> is a container runtime for Linux. This is a high-level container primitive that gives you a similar technology to what powers Heroku Dynos. It provides the heart of Dokku.</li>

<li><a href='https://github.com/progrium/buildstep'>Buildstep</a> uses Heroku&#8217;s open source buildpacks and is responsible for building the base images that applications are built on. You can think of it as producing the &#8220;stack&#8221; for Dokku, to borrow a concept from Heroku.</li>

<li><a href='https://github.com/progrium/gitreceive'>Gitreceive</a> is a project that provides you with a git user that you can push repositories to. It also triggers a script to handle that push. This provides the push mechanism that you might be familiar with from Heroku.</li>
</ul>

<p>There are a few other projects being developed to support Dokku and expand its functionality without inflating its line count. Each project is independently useful, but I&#8217;ll share more about these as they&#8217;re integrated into Dokku.</p>

<p>For now, here&#8217;s a screencast that shows how to set up Dokku, along with a quick walk-through of the code.</p>
<iframe allowFullScreen='allowFullScreen' frameborder='0' height='394' mozallowfullscreen='mozallowfullscreen' src='http://player.vimeo.com/video/68631325' webkitAllowFullScreen='webkitAllowFullScreen' width='700'>No iFrames?</iframe>
</div>

<a href="/blog/2013/06/19/dokku-the-smallest-paas-implementation-youve-ever-seen#disqus_thread">Comments</a>
<hr />





<div class="article">
  <div class="date">
    <span class="month">Jan</span>
    <span class="day">05</span><br />
    <span class="year">2013</span>
  </div>
  <h1><a href="/blog/2013/01/05/executable-tweets-and-programs-in-short-urls">Executable Tweets and Programs in Short URLs</a></h1>
  <p>A few weeks ago I was completely consumed for the better part of a day that I would have otherwise spent on more practical work.</p>
<blockquote class='twitter-tweet tw-align-center'><p>Let's reflect. On a whim, I spent 6 hours writing programs that live in URL shorteners to create installable programs from Tweets.</p>&mdash; Jeff Lindsay (@progrium) <a data-datetime='2012-12-13T07:01:11+00:00' href='https://twitter.com/progrium/status/279118756561711104'>December 12, 2012</a></blockquote><script charset='utf-8' src='//platform.twitter.com/widgets.js'> </script>
<p>Yeah, what? Weird, right? It started from a Twitter conversation earlier that day with my friend Joel:</p>
<blockquote class='twitter-tweet tw-align-center'><p>$ for app in `heroku apps | grep -v '='`; do echo <a href='https://twitter.com/search/$app'>$app</a>; heroku ps --app <a href='https://twitter.com/search/$app'>$app</a>; done # how to figure out what you have running on heroku</p>&mdash; Joël Franusic (@jf) <a data-datetime='2012-12-13T01:10:20+00:00' href='https://twitter.com/jf/status/279030460674347008'>December 12, 2012</a></blockquote><script charset='utf-8' src='//platform.twitter.com/widgets.js'> </script><blockquote class='twitter-tweet tw-align-center' data-in-reply-to='279030460674347008'><p>@<a href='https://twitter.com/jf'>jf</a> reminds me of yet another app i need to build</p>&mdash; Jeff Lindsay (@progrium) <a data-datetime='2012-12-13T01:10:56+00:00' href='https://twitter.com/progrium/status/279030609345667072'>December 12, 2012</a></blockquote><script charset='utf-8' src='//platform.twitter.com/widgets.js'> </script><blockquote class='twitter-tweet tw-align-center' data-in-reply-to='279030609345667072'><p>@<a href='https://twitter.com/progrium'>progrium</a> I just wrote and launched a "client side" "bash app" right there. Bam.</p>&mdash; Joël Franusic (@jf) <a data-datetime='2012-12-13T01:15:47+00:00' href='https://twitter.com/jf/status/279031831809097728'>December 12, 2012</a></blockquote><script charset='utf-8' src='//platform.twitter.com/widgets.js'> </script><blockquote class='twitter-tweet tw-align-center' data-in-reply-to='279031831809097728'><p>@<a href='https://twitter.com/jf'>jf</a> app tweets. an app in a tweet.</p>&mdash; Jeff Lindsay (@progrium) <a data-datetime='2012-12-13T01:16:53+00:00' href='https://twitter.com/progrium/status/279032107265839104'>December 12, 2012</a></blockquote><script charset='utf-8' src='//platform.twitter.com/widgets.js'> </script><blockquote class='twitter-tweet tw-align-center' data-in-reply-to='279032107265839104'><p>@<a href='https://twitter.com/progrium'>progrium</a> $ apptweet install id:279030460674347008</p>&mdash; Joël Franusic (@jf) <a data-datetime='2012-12-13T01:19:10+00:00' href='https://twitter.com/jf/status/279032681373790208'>December 12, 2012</a></blockquote><script charset='utf-8' src='//platform.twitter.com/widgets.js'> </script>
<p>This wishful brainstorming inspired me to start building exactly that. But first, a digression.</p>

<p>The idea reminded me of an idea I got from <a href='https://twitter.com/rndmcnlly'>Adam Smith</a> back when I was working on Scriptlets. If you can execute code from a URL, you could &#8220;store&#8221; a program in a shortened URL. I decided to combine this with the curl-pipe-bash technique that&#8217;s been starting to get popular to bootstrap installs. If you&#8217;re unfamiliar, take this Gist of a Bash script:</p>
<script src='https://gist.github.com/4464431.js'> </script>
<p>Given the &#8220;view raw&#8221; URL for that Gist, you can curl it and pipe it into Bash to execute it right there in your shell. It would look like this:</p>

<pre><code>$ curl -s https://gist.github.com/raw/4464431/gistfile1.txt | bash
Hello world</code></pre>

<p>Instead of having Gist store the program, how could we make it so the source would just live within the URL? Well in the case of curl-pipe-bash, we just need that source to be returned in the body of a URL. So I built a simple app to run on Heroku that takes the query string and outputs it in the body, a sort of echo service.</p>
<script src='https://gist.github.com/4464442.js'> </script>
<p>Letting you do this:</p>

<pre><code>$ curl &quot;http://queryecho.herokuapp.com?Hello+world&quot;
Hello world</code></pre>

<p>Which you could conceal and shorten with a URL shortener, like Bitly. I prefer the j.mp domain Bitly has. And since they&#8217;re just redirecting you to the long URL, you&#8217;d use the <code>-L</code> option in curl to make it follow redirects:</p>

<pre><code>$ curl -L http://j.mp/RyUN03
Hello world</code></pre>

<p>When you make a short URL from the bitly website, they conveniently make sure the query string is properly URL encoded. So if I just typed <code>queryecho.herokuapp.com/?echo &quot;Hello world&quot;</code> into bitly, it would give me a short URL with a properly URL encoded version of that URL that would return <code>echo &quot;Hello world&quot;</code>. This URL we could then curl-pipe into Bash:</p>

<pre><code>$ curl -Ls http://j.mp/VGgI3o | bash
Hello world</code></pre>

<p>See what&#8217;s going on there? We wrote a simple Hello world program in Bash that effectively lives in that short URL. And we can run it with the curl-pipe-bash technique.</p>

<p>Later in our conversation, Joel suggests an example &#8220;app tweet&#8221; that if executed in Bash given a URL argument, it would tell you where it redirects. So if you gave it a short URL, it would tell you the long URL.</p>
<blockquote class='twitter-tweet tw-align-center' data-in-reply-to='279032107265839104'><p>@<a href='https://twitter.com/progrium'>progrium</a> $ echo "$1"; curl -IL --silent "$1" | grep Location | grep -o 'http.*' # this is a URL "unshortener"</p>&mdash; Joël Franusic (@jf) <a data-datetime='2012-12-13T01:23:08+00:00' href='https://twitter.com/jf/status/279033679592951809'>December 12, 2012</a></blockquote><script charset='utf-8' src='//platform.twitter.com/widgets.js'> </script>
<p>Just so you know what it would look like, if you put that program in a shell script and ran it against a short URL that redirected to www.google.com, this is what you would see:</p>

<pre><code>$ ./unshortener.sh http://j.mp/www-google-com
http://j.mp/www-google-com
http://www.google.com/</code></pre>

<p>It prints the URL you gave it and then resolves the URL and prints the long URL. Pretty simple.</p>

<p>So I decided to put this program in a short URL. Here we have <a href='http://j.mp/TaHyRh'>j.mp/TaHyRh</a> which will resolve to:</p>

<pre><code>http://queryecho.herokuapp.com/?echo%20%22$url%22;%20curl%20-ILs%20%22$url%22%20|%20grep%20Location%20|%20grep%20-o%20&#39;http.*&#39;</code></pre>

<p>Luckily I didn&#8217;t have to do all that URL encoding. I just pasted his code in after <code>queryecho.herokuapp.com/?</code> and bitly took care of it. What&#8217;s funny is that this example program is made to run on short URLs, so when I told him about it, my example ran on the short URL that contained the program itself:</p>

<pre><code>$ curl -Ls http://j.mp/TaHyRh | url=http://j.mp/TaHyRh bash
http://j.mp/TaHyRh
http://queryecho.herokuapp.com/?echo &quot;$url&quot;; curl -ILs &quot;$url&quot; | grep Location | grep -o &#39;http.*&#39;</code></pre>

<p>You may have noticed my version of the program uses <code>$url</code> instead of <code>$1</code> because we have to use environment variables to provide input to curl-pipe-bash scripts. For reference, to run my URL script against the google.com short URL we made before, it would look like this:</p>

<pre><code>$ curl -Ls http://j.mp/TaHyRh | url=http://j.mp/www-google-com bash
http://j.mp/www-google-com
http://www.google.com/</code></pre>

<p>Okay, so we can now put Bash scripts in short URLs. What happened to installing apps in Tweets? Building an <code>apptweet</code> program like Joel imagined would actually be pretty straightforward. But I wanted to build it in and install it with these weird programs-in-short-URLs.</p>

<p>The first obstacle was figuring out how to get it to modify your current environment. Normally curl-pipe-bash URLs install a downloaded program into your <code>PATH</code>. But I didn&#8217;t want to install a bunch of files on your computer. Instead I just wanted to install a temporary Bash function that would disappear when you leave your shell session. In order to do this, I had to do a variant of the curl-pipe-bash technique using eval:</p>

<pre><code>$ eval $(curl -Ls http://j.mp/setup-fetchtweet)
$ fetchtweet 279072855206031360
@jf you asked for it... Jeff Lindsay (@progrium) December 13, 2012</code></pre>

<p>As you can see by inspecting that URL, it just defines a Bash function that runs a Python script from a Gist. I cheated and used Gist for some reason. That Python script uses the Twitter embed endpoint (same one used for the embedded Tweets in this post) to get the contents of a Tweet without authentication.</p>

<p>The next thing I built installed and used fetchtweet to get a Tweet, parse it, put it in a Bash function named by the string after an <code>#exectweet</code> hashtag (which happens to also start a comment in Bash). So here we have a Tweet with a program in it:</p>
<blockquote class='twitter-tweet tw-align-center'><p>echo Hello world <a href='https://twitter.com/search/%23exectweet'>#exectweet</a> helloworld</p>&mdash; Jeff Lindsay (@progrium) <a data-datetime='2012-12-13T04:57:28+00:00' href='https://twitter.com/progrium/status/279087620145958912'>December 12, 2012</a></blockquote><script charset='utf-8' src='//platform.twitter.com/widgets.js'> </script>
<p>To install it, we&#8217;d run this:</p>

<pre><code>$ id=279087620145958912 eval $(curl -Ls http://j.mp/install-tweet)
Installed helloworld from Tweet 279087620145958912
$ helloworld
Hello world</code></pre>

<p>We just installed a program from a Tweet and ran it! Then I wrapped this up into a command you could install. To install the installer. This time it would let you give it the URL to a Tweet:</p>

<pre><code>$ eval $(curl -Ls http://j.mp/install-exectweet) 
Installed exectweet
$ exectweet https://twitter.com/progrium/status/279087620145958912
Installed helloworld from Tweet 279087620145958912
$ helloworld
Hello world</code></pre>

<p>Where would I go from there? An app that calls itself into a loop, of course!</p>
<blockquote class='twitter-tweet tw-align-center'><p>exectweet <a href='http://t.co/ri0XTprA' title='http://j.mp/recursive-app'>j.mp/recursive-app</a> ; recursive-app <a href='https://twitter.com/search/%23exectweet'>#exectweet</a> recursive-app</p>&mdash; Jeff Lindsay (@progrium) <a data-datetime='2012-12-13T07:20:12+00:00' href='https://twitter.com/progrium/status/279123541054595074'>December 12, 2012</a></blockquote><script charset='utf-8' src='//platform.twitter.com/widgets.js'> </script>
<pre><code>$ exectweet https://twitter.com/progrium/status/279123541054595074 &amp;&amp; recursive-app
Installed recursive-app from Tweet 279123541054595074
Installed recursive-app from Tweet 279123541054595074
Installed recursive-app from Tweet 279123541054595074
Installed recursive-app from Tweet 279123541054595074
...</code></pre>

<p>Obviously, this whole project was just a ridiculous, mind-bending exploration. I shared most of these examples on Twitter as I was making them. Here was my favorite response.</p>
<blockquote class='twitter-tweet tw-align-center' data-in-reply-to='279087620145958912'><p>@<a href='https://twitter.com/progrium'>progrium</a> End of the world, brought to you by Jeff Lindsay, via the Internet collapsing in on itself and taking the world with it.</p>&mdash; Matt Mechtley (@biphenyl) <a data-datetime='2012-12-13T05:00:44+00:00' href='https://twitter.com/biphenyl/status/279088441084497922'>December 12, 2012</a></blockquote><script charset='utf-8' src='//platform.twitter.com/widgets.js'> </script>
<p>You may have noticed, it just happened to be 12/12/2012 that day.</p>
<style type='text/css'>
.twitter-tweet-rendered {
  clear: none!important;
}
.twt-reply {
  display: none!important;
}
</style>
</div>

<a href="/blog/2013/01/05/executable-tweets-and-programs-in-short-urls#disqus_thread">Comments</a>
<hr />





<div class="article">
  <div class="date">
    <span class="month">Jan</span>
    <span class="day">01</span><br />
    <span class="year">2013</span>
  </div>
  <h1><a href="/blog/2013/01/01/where-did-localtunnel-come-from">Where did Localtunnel come from?</a></h1>
  <p>Five years ago, async network programming scared me. I was a web developer. Working with the high level tools and frameworks of HTTP seemed much easier than any sort of serious low level networking. Especially since network programming would often also mean some kind of concurrent programming with threads or callbacks. I had mostly avoided multithreading and had no idea what an event loop was. I came from PHP.</p>

<p>Around 2007, I was starting to think about webhooks. One motivator was how you could use webhooks to let web developers, like me, build systems that used other protocols without them having to work with that protocol. For example, one of my first projects with webhooks was called Mailhooks. I wanted to accept email in my application, but I didn&#8217;t want to deal with email servers. I wanted to get an HTTP POST when an email came in with all the email fields nicely provided as POST parameters.</p>

<p>This is how I started working with Twisted. Twisted became my main tool to build webhook adapters for existing protocols. I even tried to generalize that idea in a project called Protocol Droid. Slowly I started to grok, and not fear, this kind of programming.</p>

<p>It&#8217;s funny how my desire to work with abstractions that didn&#8217;t exist yet to avoid a certain kind of programming was directly responsible for me eventually becoming an expert in that kind of programming.</p>

<p>Then in late 2009, I had another idea while thinking about webhooks. It would be great if I could expose a local web server to the Internet with a friendly URL. It should just be a simple command. There would have to be a server, but there could just be a public server that you didn&#8217;t even have to think about.</p>

<p>I committed <a href='https://github.com/progrium/localtunnel/tree/prototype'>the first prototype of Localtunnel</a> to Github in January 2010. It was written entirely in Twisted. It also didn&#8217;t actually work. I really recommend taking a look because it was terrible. One of the challenges was multiplexing the HTTP requests into a single tunnel connection. My approach was so naive it just didn&#8217;t work. As soon as you made more than one request at a time, it broke.</p>

<p>A few months later, I decided to take a different approach. Instead of doing my own protocol, client, and server, I&#8217;d just make a wrapper around what I knew already worked: SSH tunneling. This was pretty quick to make happen, and that version is basically what&#8217;s been in production to this day.</p>

<p>This shortcut came with a lot of weird quirks. For example, the easiest way I found to implement an SSH tunnel client was a Ruby library, so I implemented the client in Ruby. The server, though, was in Python because I still only really knew Twisted for evented programming.</p>

<p>Actually, using SSH was the source of most of the quirks and annoyances. I was pretty bothered that it slowed down the initial user experience by requiring a public key to be uploaded. But most of the pain was operational. The server, sshd, would create a process for every tunnel. Localtunnel also needed its own user and to pretty much own the SSH configuration for that machine. Then, on occasion, something weird would happen where a tunnel would die and the process would go crazy eating up CPU. It would have to be manually killed or it would eventually bring the server to a halt. And, eventually, the authorized_keys file would become enormous from all the keys uploaded.</p>

<p>On top of all this, SSH is pretty opaque. It&#8217;s been around for so long and used so much that it certainly just works &#8230; you just don&#8217;t really know how. I still don&#8217;t know how SSH does tunneling or what the protocol looks like, even after trying to read the RFC for it.</p>

<p>By mid-2011, I was working at Twilio building distributed, real-time messaging systems at scale. I certainly came a long way from fearing async network programming. Localtunnel was still running the implementation based on SSH. By then it had quite a large user base and collected a number of bugs and feature requests. I also had my own operations and user experience wish list. With such a huge list of new requirements, so many problems with the current implementation, and a drastically different experience level and mindset, I decided to redesign Localtunnel from the ground up.</p>

<p>Since I was pretty consumed by Twilio, I didn&#8217;t have a lot of time to work on Localtunnel. I thought the biggest bang for buck in the long term would be to slowly work on the new version. They say software is never done, but I personally believe software can be finished. It just requires an aggressive drive for simplicity, and the <em>only</em> way you can make significant advances in simplicity is through redesign.</p>

<p>In the meantime, users continued to experience issues with the current implementation. These problems only got worse as it became more popular. For example, the biggest issue was that the namespace for tunnel names was too small. Users would get requests from old tunnels, and in rare cases tunnel names would get pulled out from under you while using them. This created confusion and a lot of emails and issue tickets, but it still worked with the occasional restart.</p>

<p>I&#8217;ve used this constant stream of complaints, which has been going on for almost two years, to make sure I keep making progress on the new version. In fact, I&#8217;m pretty sure I needed it because of my lifestyle of abundant projects.</p>

<p>Last week I finally <a href='http://progrium.com/blog/2012/12/25/localtunnel-v2-available-in-beta/'>released a beta of the new version</a>. What&#8217;s interesting is that it&#8217;s a completely different architecture from what I started out with for the redesign. After the original unreleased prototype, there&#8217;s been 3 major approaches to implementation. In the coming weeks I&#8217;m going to share a more technical history of the architecture of Localtunnel, leading up to a deep exploration of what I hope will be its final form.</p>
</div>

<a href="/blog/2013/01/01/where-did-localtunnel-come-from#disqus_thread">Comments</a>
<hr />


<ul class="pager article">
  
  <li class="previous">
    <a href="/blog/page2">&larr; Older</a>
  </li>
  

  
  <li class="next disabled">
    <a href="#">Newer &rarr;</a>
  </li>
  
</ul>

  <script type="text/javascript">
        /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
        var disqus_shortname = 'progrium'; // required: replace example with your forum shortname

        /* * * DON'T EDIT BELOW THIS LINE * * */
        (function () {
            var s = document.createElement('script'); s.async = true;
            s.type = 'text/javascript';
            s.src = 'http://' + disqus_shortname + '.disqus.com/count.js';
            (document.getElementsByTagName('HEAD')[0] || document.getElementsByTagName('BODY')[0]).appendChild(s);
        }());
        </script>

      </div>
      <div id="roots">
        <img src="/images/roots.png" />
      </div>
    </div>
    <script type="text/javascript">
        var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
        document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
        </script>
        <script type="text/javascript">
        try {
        var pageTracker = _gat._getTracker("UA-6824126-1");
        pageTracker._trackPageview();
        } catch(err) {}</script>
  </body>
</html>
